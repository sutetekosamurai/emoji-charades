{% extends "base.html" %}
{% block content %}
<h1>Hints â€” Room {{ room.code }}</h1>

<section class="card">
  <h2>ã‚ãªãŸã®çµµæ–‡å­—ã‚’æŠ•ç¨¿</h2>
  {% if my_topic %}
  <p>ã‚ãªãŸã®ãŠé¡Œï¼š<strong>{{ my_topic }}</strong></p>
  {% endif %}

  <form method="post" action="/rooms/{{ room.code }}/hint">
    {% if me %}
    <p>ã‚ãªãŸï¼š<strong>{{ me.name }}</strong></p>
    {% else %}
    <label>ãƒ‹ãƒƒã‚¯ãƒãƒ¼ãƒ </label>
    <input type="text" name="name" required>
    {% endif %}

    <label>ãƒ’ãƒ³ãƒˆï¼ˆçµµæ–‡å­—ï¼‰</label>
    <input type="text" name="emoji" placeholder="ğŸ˜€ğŸ˜ğŸ”¥" required maxlength="16">

    <button type="submit">é€ä¿¡</button>
  </form>
</section>

<section class="card">
  <h2>ã¿ã‚“ãªã®ãƒ’ãƒ³ãƒˆ</h2>
  <div id="hints"
     hx-get="/rooms/{{ room.code }}/hints"
     hx-trigger="load, every 2s"
     hx-swap="innerHTML">
  <!-- åˆæœŸè¡¨ç¤ºã‚’ã‚µãƒ¼ãƒå´ã® hint_page ã§æã„ã¦ã‚‚OK -->
  </div>
</section>

{% if is_host and (room.status.value if room.status else room.status) == 'hint' %}
<section class="card">
  <form hx-post="/rooms/{{ room.code }}/lock_hints" hx-swap="none">
    <button class="btn">ãƒ’ãƒ³ãƒˆå—ä»˜çµ‚äº† â†’ æŠ•ç¥¨ã¸</button>
  </form>
</section>
{% endif %}

<div id="clock"
     hx-get="/rooms/{{ room.code }}/clock"
     hx-trigger="load, every 1s"
     hx-swap="innerHTML">
  <!-- åˆå›ãƒ—ãƒ¬ãƒ¼ã‚¹ãƒ›ãƒ«ãƒ€ -->
  <span class="countdown">â€¦ ç§’</span>
</div>

<div hx-get="/rooms/{{ room.code }}/phase?at=hint" hx-trigger="load, every 2s" hx-swap="none"></div>
{% endblock %}
